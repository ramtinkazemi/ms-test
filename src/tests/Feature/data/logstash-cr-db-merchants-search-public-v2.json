{
  "template": "logstash-cr-db-merchants-search-public-v2",
  "settings": {
    "analysis": {
      "filter": {
        "english_stop": {
          "type": "stop",
          "stopwords": "_english_"
        },
        "light_english_stemmer": {
          "type": "stemmer",
          "language": "light_english"
        },
        "english_possessive_stemmer": {
          "type": "stemmer",
          "language": "possessive_english"
        },
        "gramFilter": {
          "type": "nGram",
          "min_gram": 1,
          "max_gram": 20,
          "token_chars": [
            "letter",
            "digit"
          ]
        }
      },
      "analyzer": {
        "english": {
          "tokenizer": "standard",
          "filter": [
            "english_possessive_stemmer",
            "lowercase",
            "english_stop",
            "light_english_stemmer",
            "asciifolding",
            "snowball",
            "apostrophe"
          ]
        },
        "gramAnalyzer": {
          "type": "custom",
          "tokenizer": "whitespace",
          "filter": [
            "lowercase",
            "gramFilter",
            "apostrophe"
          ]
        },
        "whitespaceAnalyzer": {
          "type": "custom",
          "tokenizer": "whitespace",
          "filter": [
            "lowercase",
            "apostrophe"
          ]
        }
      }
    }
  },

  "mappings": {
    "merchant": {
      "properties": {
        "id": {
          "type": "text"
        },
        "@version": {
          "type": "keyword"
        },
        "querydatetime": {
          "type": "date",
          "format": "yyyy-MM-dd HH:mm:ss.SSS ZZZZZZZZZZZZZZZZ||yyyy-MM-dd||yyyy-MM-dd HH:mm:ss.SSS||yyyy-MM-dd"
        },
        "merchanttype": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "merchantid": {
          "type": "keyword"
        },
        "merchantaliasid": {
          "type": "keyword"
        },

        "networkid": {
          "type": "keyword"
        },
        "status": {
          "type": "keyword"
        },
        "merchantname": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword"
            }
          },
          "analyzer": "gramAnalyzer",
          "search_analyzer": "whitespaceAnalyzer"
        },
        "networkname": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },

        "websiteurl": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "descriptionshort": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "descriptionlong": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword"
            }
          },
          "analyzer": "gramAnalyzer",
          "search_analyzer": "whitespaceAnalyzer"
        },
        "basicterms": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "isfeatured": {
          "type": "boolean"
        },
        "hyphenatedstring": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "keywords": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword"
            }
          },
          "analyzer": "gramAnalyzer",
          "search_analyzer": "whitespaceAnalyzer"
        },

        "currencyid": {
          "type": "keyword"
        },
        "referenceid": {
          "type": "keyword"
        },
        "referencename": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "extentedterms": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "internationalterms": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "mobileenabled": {
          "type": "boolean"
        },
        "tabletenabled": {
          "type": "boolean"
        },

        "ishomepagefeatured": {
          "type": "boolean"
        },
        "countryid": {
          "type": "long"
        },
        "timezoneid": {
          "type": "long"
        },
        "downloadproduct": {
          "type": "boolean"
        },
        "dowloadoffer": {
          "type": "boolean"
        },
        "downloadtransaction": {
          "type": "boolean"
        },
        "downloadproducturl": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },

        "ispopular": {
          "type": "boolean"
        },
        "trackingtime": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "approvaltime": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "islatest": {
          "type": "boolean"
        },

        "comment": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "approvalwaitdays": {
          "type": "long"
        },
        "clickwindowcheck": {
          "type": "boolean"
        },
        "notificationmsg": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "confirmationmsg": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "waittimecheck": {
          "type": "boolean"
        },
        "isconsumption": {
          "type": "boolean"
        },
        "istoolbarenabled": {
          "type": "boolean"
        },
        "isluxurybrand": {
          "type": "boolean"
        },
        "istoolbaroptoutserps": {
          "type": "boolean"
        },
        "istoolbaroptoutslideractivation": {
          "type": "boolean"
        },
        "istoolbaroptoutsearch": {
          "type": "boolean"
        },
        "trackinglink": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },

        "domain": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "domainlanguage": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "offercount": {
          "type": "long"
        },

        "smallimageurlsecure": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "mediumimageurlsecure": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "membercommissionrate": {
          "type": "float"
        },
        "regularimageurlsecure": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },

        "clickouts": {
          "type": "long"
        }
      }
    },
    "merchant_tier": {
      "dynamic_templates": [
        {
          "message_field": {
            "match": "message",
            "match_mapping_type": "string",
            "mapping": {
              "index": "analyzed",
              "omit_norms": true,
              "type": "string"
            }
          }
        },
        {
          "string_fields": {
            "match": "*",
            "match_mapping_type": "string",
            "mapping": {
              "fields": {
                "raw": {
                  "ignore_above": 256,
                  "index": "not_analyzed",
                  "type": "string"
                }
              },
              "index": "analyzed",
              "omit_norms": true,
              "type": "string"
            }
          }
        }
      ],
      "_parent": {
        "type": "merchant"
      },
      "properties": {
        "id": {
          "type": "text"
        },
        "@version": {
          "type": "keyword"
        },
        "querydatetime": {
          "type": "date",
          "format": "yyyy-MM-dd HH:mm:ss.SSS ZZZZZZZZZZZZZZZZ||yyyy-MM-dd||yyyy-MM-dd HH:mm:ss.SSS||yyyy-MM-dd"
        },
        "merchantid": {
          "type": "keyword"
        },
        "merchantaliasid": {
          "type": "keyword"
        },
        "merchanttierid": {
          "type": "keyword"
        },
        "tiername": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "tiertypeid": {
          "type": "keyword"
        },
        "tiertype": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "startdate": {
          "type": "date",
          "format": "yyyy-MM-dd HH:mm:ss.SSS ZZZZZZZZZZZZZZZZ||yyyy-MM-dd||yyyy-MM-dd HH:mm:ss.SSS||yyyy-MM-dd"
        },
        "enddate": {
          "type": "date",
          "format": "yyyy-MM-dd HH:mm:ss.SSS ZZZZZZZZZZZZZZZZ||yyyy-MM-dd||yyyy-MM-dd HH:mm:ss.SSS||yyyy-MM-dd"
        },
        "commissiontype": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "commission": {
          "type": "float"
        },
        "clientcommissionrate": {
          "type": "float"
        },
        "membercommissionrate": {
          "type": "float"
        },
        "cashbackrate": {
          "type": "float"
        },
        "baserate": {
          "type": "text",
          "norms": false,
          "fields": {
            "raw": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        }
      }
    }
  }
}