{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Cashrewards Search API"
  },
  "host": "localhost",
  "schemes": [
    "http"
  ],
  "basePath": "/api/v1",
  "produces": [
    "application/json"
  ],
  "paths": {
    "/click/log": {
      "post": {
        "summary": "Log search click",
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "search click",
            "description": "Search click to log",
            "schema": {
              "type": "object",
              "required": [
                "merchantId",
                "merchantName",
                "searchTerm",
                "searchWeight"
              ],
              "properties": {
                "merchantId": {
                  "type": "string"
                },
                "merchantName": {
                  "type": "string"
                },
                "searchTerm": {
                  "type": "string"
                },
                "searchWeight": {
                  "type": "string"
                },
                "memberId": {
                  "type": "string"
                },
                "clientId": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Processing Request",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "description": "Status of post request",
                  "type": "boolean"
                },
                "messages": {
                  "type": "object",
                  "properties": {
                    "Accepted": {
                      "description": "Post processing status",
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/autocomplete": {
      "get": {
        "description": "Get autocomplete suggestion",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "query requst",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "auto complete response",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string"
                },
                "messages": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/AutoComplete"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/search": {
      "get": {
        "description": "Get search results",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "Query request",
            "required": true,
            "type": "string"
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Sorting by relevance/cashback/merchantname. ( format = [fieldname]:[asc/desc] | example \"cashback:desc,merchantname:asc\")",
            "required": false,
            "type": "string"
          },
          {
            "name": "per_page",
            "in": "query",
            "description": "Specify the number of records to return in one request",
            "required": false,
            "type": "integer"
          },
          {
            "name": "page",
            "in": "query",
            "description": "specify the page of results to return (start from 1)",
            "required": false,
            "type": "integer"
          },
          {
            "name": "domain",
            "in": "query",
            "description": "Client domain",
            "required": false,
            "type": "string"
          },
          {
            "name": "language",
            "in": "query",
            "description": "Client language",
            "required": false,
            "type": "string"
          },
          {
            "name": "fields",
            "in": "query",
            "description": "Required fields, comma separated",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Search response",
            "schema": {
              "type": "object",
              "properties": {
                "summary": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "description": "Total number of records",
                      "type": "integer"
                    },
                    "count": {
                      "description": "Records count in request",
                      "type": "integer"
                    },
                    "per_page": {
                      "description": "The number of records to return in one request",
                      "type": "integer"
                    },
                    "page": {
                      "description": "The page of results to return",
                      "type": "integer"
                    }
                  }
                },
                "items": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/Merchant"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "Merchant": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "client_id": {
          "type": "string"
        },
        "merchantid": {
          "type": "integer"
        },
        "merchantname": {
          "type": "string"
        },
        "websiteurl": {
          "type": "string"
        },
        "status": {
          "type": "integer"
        },
        "regularimageurlsecure": {
          "type": "string"
        },
        "smallimageurlsecure": {
          "type": "string"
        },
        "mediumimageurlsecure": {
          "type": "string"
        },
        "descriptionshort": {
          "type": "string"
        },
        "descriptionlong": {
          "type": "string"
        },
        "basicterms": {
          "type": "string"
        },
        "extentedterms": {
          "type": "string"
        },
        "cashbackrate": {
          "type": "number",
          "format": "float"
        },
        "membercommissionrate": {
          "type": "number",
          "format": "float"
        },
        "clientcommissionrate": {
          "type": "number",
          "format": "float"
        },
        "commissiontype": {
          "type": "string"
        },
        "downloadoffer": {
          "type": "boolean"
        },
        "offercount": {
          "type": "integer"
        },
        "keywords": {
          "type": "string"
        },
        "trackinglink": {
          "type": "string"
        },
        "weight": {
          "type": "integer"
        },
        "clickouts": {
          "type": "integer"
        }
      }
    },
    "AutoComplete": {
      "type": "object",
      "properties": {
        "score": {
          "type": "number",
          "format": "float"
        },
        "source": {
          "type": "object",
          "properties": {
            "baserate": {
              "type": "string"
            },
            "smallimageurlsecure": {
              "type": "string"
            },
            "mediumimageurlsecure": {
              "type": "string"
            },
            "merchantname": {
              "type": "string"
            },
            "regularimageurlsecure": {
              "type": "string"
            },
            "descriptionshort": {
              "type": "string"
            }
          }
        }
      }
    }
  }
}